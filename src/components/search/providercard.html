<template x-for="provider in sortedAndFilteredProviders" :key="provider.id">
    <div>
        <!-- Include the provider card component -->
        <a :href="(window.locale === 'de' ? '/de/' : '/') + provider.slug"
        class="bg-gray-500 flex flex-col gap-4 items-center justify-center overflow-hidden px-4 md:px-8 text-center rounded-xl h-32 md:h-48 hover:ring-2 ring-orange-500 active:scale-95 transition-all group relative bg-cover">


            <!-- Provider Name -->
            <h2 class="text-lg md:text-3xl text-white font-bold drop-shadow-provider line-clamp-2 z-10" x-text="provider.name"></h2>

            <!-- Main Category -->
            <div class="bg-white rounded-lg py-1 px-2 absolute top-2 left-2 text-[10px] md:text-sm z-10 font-semibold" x-text="provider.mainCategory.name"></div>

            <!-- AI Rating with Dynamic Colors -->
            <div 
                class="font-bold rounded-lg py-1 px-2 absolute top-2 right-2 text-[10px] md:text-sm z-10"
                :class="{
                    'bg-red-500 text-red-950 ring-1 ring-offset-1 ring-offset-red-100 ring-red-500': provider.aiRating <= 3,
                    'bg-orange-500 text-orange-950 ring-1 ring-offset-1 ring-offset-orange-100 ring-orange-500': provider.aiRating > 3 && provider.aiRating <= 4,
                    'bg-lime-500 text-lime-950 ring-1 ring-offset-1 ring-offset-lime-100 ring-lime-500': provider.aiRating > 4 && provider.aiRating <= 4.5,
                    'bg-green-500 text-green-950 ring-1 ring-offset-1 ring-offset-green-100 ring-green-500': provider.aiRating > 4.5 && provider.aiRating <= 5
                }"
            >
                <span x-text="provider.aiRating.toFixed(1)"></span>
            </div>

            <!-- Provider Image -->
            <template x-if="provider.photos && provider.photos.length > 0">
                <img
                    class="absolute inset-0 h-full w-full z-0 transition-transform scale-100 group-hover:scale-125 object-cover brightness-75"
                    :src="provider.photos[0].responsiveImage.src"
                    :alt="provider.name + ' cover'"
                />
            </template>
        </a>
    </div>
</template>